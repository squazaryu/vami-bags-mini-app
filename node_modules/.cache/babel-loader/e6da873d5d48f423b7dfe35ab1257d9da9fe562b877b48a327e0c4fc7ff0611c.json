{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Typography,Button,Card,Table,Alert,Spin,Result,message,Input}from'antd/lib/index';import styled from'styled-components';import{testProxyConnection,axiosInstance}from'../utils/proxyTest';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title}=Typography;// –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–æ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–æ–π\nconst Container=styled.div`\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n`;const StyledTitle=styled(Title)`\n  text-align: center;\n  margin-bottom: 20px !important;\n  color: #000000 !important;\n  font-size: 22px !important;\n  \n  @media (max-width: 320px) {\n    font-size: 20px !important;\n  }\n`;const StyledCard=styled(Card)`\n  border-radius: 12px;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);\n  \n  .ant-table {\n    background: transparent;\n  }\n  \n  .ant-table-thead > tr > th {\n    background-color: #f5f5f5;\n    color: rgba(0, 0, 0, 0.65);\n    font-weight: 500;\n  }\n  \n  .ant-table-tbody > tr > td {\n    color: #000000;\n  }\n  \n  .ant-table-thead > tr > th,\n  .ant-table-tbody > tr > td {\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n  \n  @media (max-width: 576px) {\n    .ant-table-thead > tr > th,\n    .ant-table-tbody > tr > td {\n      padding: 10px 12px;\n      font-size: 13px;\n    }\n  }\n`;const ButtonContainer=styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n`;const ActionButton=styled(Button)`\n  min-width: 100px;\n  height: 36px;\n  border-radius: 10px;\n  font-weight: 500;\n  \n  &.submit-button {\n    background-color: #1890ff;\n    border-color: #1890ff;\n    color: #ffffff;\n  }\n`;const CloseButton=styled(Button)`\n  min-width: 100px;\n  background-color: #F2F2F7;\n  font-weight: 500;\n  height: 36px;\n  border-radius: 10px;\n  box-shadow: none;\n  border: 1px solid #E5E5EA;\n  color: #000000;\n  \n  &:hover {\n    border-color: #FF3B30;\n    color: #FF3B30;\n  }\n`;const PreviewStep=_ref=>{var _window$Telegram;let{orderDetails,onBack,onClose}=_ref;// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App\nconst tgWebApp=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:_window$Telegram.WebApp;const[isSubmitting,setIsSubmitting]=useState(false);const[success,setSuccess]=useState(false);const[error,setError]=useState(null);const[userInfo,setUserInfo]=useState(null);const[debugInfo,setDebugInfo]=useState('');const[contactRequested,setContactRequested]=useState(false);// –§–ª–∞–≥, —á—Ç–æ –∫–æ–Ω—Ç–∞–∫—Ç –∑–∞–ø—Ä–æ—à–µ–Ω\nconst[showContactRequest,setShowContactRequest]=useState(false);const[isLoading,setIsLoading]=useState(false);const[phoneNumber,setPhoneNumber]=useState(null);const[editableUserInfo,setEditableUserInfo]=useState(()=>{// –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage\nconst savedState=localStorage.getItem('editableUserInfo');if(savedState){try{const parsedState=JSON.parse(savedState);console.log(\"[DEBUG] Restored state from localStorage:\",parsedState);return parsedState;}catch(e){console.error('Error parsing saved state:',e);}}// –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nif(userInfo){const fullName=`${userInfo.first_name} ${userInfo.last_name||''}`.trim();return{name:fullName,username:userInfo.username||'',phone:null};}return{name:'',username:'',phone:null};});// –°–µ—Ä–≤–µ—Ä —Å –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π\nconst SERVER_URL=\"https://telegram-bot-webhook-proxy.vercel.app/api/send-message\";// ID –ø—Ä–æ–¥–∞–≤—Ü–∞ –∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞\nconst SELLER_CHAT_ID=\"50122963\";const BOT_TOKEN=\"7408506728:AAGK9d5kddSnMQDwgIYOiEK-6nPFFwgYP-M\";// –ü–µ—Ä–µ–≤–æ–¥ —Ü–≤–µ—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\nconst colorTranslations={'pink':'–†–æ–∑–æ–≤—ã–π','red':'–ö—Ä–∞—Å–Ω—ã–π','blue':'–°–∏–Ω–∏–π','green':'–ó–µ–ª–µ–Ω—ã–π','yellow':'–ñ–µ–ª—Ç—ã–π','black':'–ß–µ—Ä–Ω—ã–π','white':'–ë–µ–ª—ã–π','purple':'–§–∏–æ–ª–µ—Ç–æ–≤—ã–π','orange':'–û—Ä–∞–Ω–∂–µ–≤—ã–π','gray':'–°–µ—Ä—ã–π','brown':'–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π','gold':'–ó–æ–ª–æ—Ç–æ–π','silver':'–°–µ—Ä–µ–±—Ä—è–Ω—ã–π','darkred':'–¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π','darkblue':'–¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π','darkgreen':'–¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π','#f5222d':'–ö—Ä–∞—Å–Ω—ã–π','#eb2f96':'–†–æ–∑–æ–≤—ã–π','#722ed1':'–§–∏–æ–ª–µ—Ç–æ–≤—ã–π','#1890ff':'–°–∏–Ω–∏–π','#13c2c2':'–ì–æ–ª—É–±–æ–π','#52c41a':'–ó–µ–ª–µ–Ω—ã–π','#fadb14':'–ñ–µ–ª—Ç—ã–π','#fa8c16':'–û—Ä–∞–Ω–∂–µ–≤—ã–π','#000000':'–ß–µ—Ä–Ω—ã–π','#8c8c8c':'–°–µ—Ä—ã–π','#ffffff':'–ë–µ–ª—ã–π','#8B0000':'–¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π','#00008B':'–¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π','#006400':'–¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π','#FFC0CB':'–†–æ–∑–æ–≤—ã–π'};// –ü–µ—Ä–µ–≤–æ–¥ –æ–ø—Ü–∏–π –Ω–∞ —Ä—É—Å—Å–∫–∏–π\nconst optionTranslations={'clasp':'–ó–∞—Å—Ç–µ–∂–∫–∞','lining':'–ü–æ–¥–∫–ª–∞–¥–∫–∞','chain':'–¶–µ–ø–æ—á–∫–∞','short_handle':'–ö–æ—Ä–æ—Ç–∫–∞—è —Ä—É—á–∫–∞','long_handle':'–î–ª–∏–Ω–Ω–∞—è —Ä—É—á–∫–∞','pocket':'–ö–∞—Ä–º–∞–Ω','zipper':'–ú–æ–ª–Ω–∏—è','embroidery':'–í—ã—à–∏–≤–∫–∞','custom_color':'–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç'};// –ü–µ—Ä–µ–≤–æ–¥ —Ñ–æ—Ä–º –Ω–∞ —Ä—É—Å—Å–∫–∏–π\nconst shapeTranslations={'kruglaya':'–ö—Ä—É–≥–ª–∞—è','pryamougolnaya':'–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è','kvadratnaya':'–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è','trapeciya':'–¢—Ä–∞–ø–µ—Ü–∏—è','mesyac':'–ú–µ—Å—è—Ü','serdce':'–°–µ—Ä–¥—Ü–µ','round':'–ö—Ä—É–≥–ª–∞—è','rectangular':'–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è','square':'–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è','trapezoid':'–¢—Ä–∞–ø–µ—Ü–∏—è','crescent':'–ú–µ—Å—è—Ü','heart':'–°–µ—Ä–¥—Ü–µ'};// –ü–µ—Ä–µ–≤–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\nconst materialTranslations={'akril':'–ê–∫—Ä–∏–ª','hrustal':'–•—Ä—É—Å—Ç–∞–ª—å','swarovski':'Swarovski','acrylic':'–ê–∫—Ä–∏–ª','crystal':'–•—Ä—É—Å—Ç–∞–ª—å'};// –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\nuseEffect(()=>{let mainButtonClickHandler=null;try{var _tgWebApp$initDataUns;// –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—É\ntestProxyConnection().then(success=>{if(!success){console.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—É\");setError(\"–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π\");}});if(tgWebApp!==null&&tgWebApp!==void 0&&(_tgWebApp$initDataUns=tgWebApp.initDataUnsafe)!==null&&_tgWebApp$initDataUns!==void 0&&_tgWebApp$initDataUns.user){console.log(\"User data available:\",tgWebApp.initDataUnsafe.user);setUserInfo(tgWebApp.initDataUnsafe.user);setDebugInfo(prev=>prev+`\\nUser data: ${JSON.stringify(tgWebApp.initDataUnsafe.user)}`);}else{console.log(\"No user data available\");setDebugInfo(prev=>prev+'\\nNo user data available');}console.log(\"Full WebApp data:\",tgWebApp);setDebugInfo(prev=>prev+`\\nTelegram WebApp available: ${!!tgWebApp}`);if(tgWebApp){setDebugInfo(prev=>prev+`\\nVersion: ${tgWebApp.version}`);setDebugInfo(prev=>prev+`\\nPlatform: ${tgWebApp.platform}`);// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º MainButton - –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç userInfo\nif(tgWebApp.MainButton){tgWebApp.MainButton.setText('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑');tgWebApp.MainButton.show();tgWebApp.MainButton.color='#1890ff';tgWebApp.MainButton.textColor='#ffffff';mainButtonClickHandler=handleSubmit;tgWebApp.MainButton.onClick(mainButtonClickHandler);console.log(\"MainButton configured with handleSubmit\");setDebugInfo(prev=>prev+\"\\nMainButton configured with handleSubmit\");}}}catch(e){console.error(\"Error initializing component or accessing user data\",e);setDebugInfo(prev=>prev+`\\nError initializing: ${e}`);setError(\"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.\");}// –û—á–∏—Å—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\nreturn()=>{if(tgWebApp!==null&&tgWebApp!==void 0&&tgWebApp.MainButton&&mainButtonClickHandler){tgWebApp.MainButton.offClick(mainButtonClickHandler);}};},[tgWebApp]);// –£–±–∏—Ä–∞–µ–º userInfo –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∞—Å—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö\n// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ localStorage –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏\nuseEffect(()=>{localStorage.setItem('editableUserInfo',JSON.stringify(editableUserInfo));},[editableUserInfo]);// –û–±–Ω–æ–≤–ª—è–µ–º editableUserInfo –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ phoneNumber\nuseEffect(()=>{if(phoneNumber){console.log(\"[DEBUG] Updating editableUserInfo with phoneNumber:\",phoneNumber);setEditableUserInfo(prev=>{const newState={...prev,phone:phoneNumber};console.log(\"[DEBUG] New editableUserInfo state after phone update:\",newState);localStorage.setItem('editableUserInfo',JSON.stringify(newState));return newState;});}},[phoneNumber]);// –û–±–Ω–æ–≤–ª—è–µ–º editableUserInfo –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ userInfo\nuseEffect(()=>{if(userInfo){console.log(\"[DEBUG] Updating editableUserInfo with userInfo:\",userInfo);const fullName=`${userInfo.first_name} ${userInfo.last_name||''}`.trim();console.log(\"[DEBUG] Full name:\",fullName);setEditableUserInfo(prev=>{const newState={name:fullName,username:userInfo.username||'',phone:prev.phone||phoneNumber};console.log(\"[DEBUG] New editableUserInfo state after userInfo update:\",newState);localStorage.setItem('editableUserInfo',JSON.stringify(newState));return newState;});}},[userInfo,phoneNumber]);// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π\nconst handleFieldChange=(field,value)=>{console.log(\"[DEBUG] handleFieldChange called with field:\",field,\"value:\",value);setEditableUserInfo(prev=>{const newState={...prev,[field]:value};console.log(\"[DEBUG] New editableUserInfo state:\",newState);localStorage.setItem('editableUserInfo',JSON.stringify(newState));return newState;});};// –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞\nconst formatOrderData=()=>{console.log('Formatting order data from:',orderDetails);const formattedProduct=orderDetails.product==='bag'?'–°—É–º–∫–∞':orderDetails.product==='coaster'?'–ü–æ–¥—Å—Ç–∞–∫–∞–Ω–Ω–∏–∫':orderDetails.product==='custom'?'–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑':orderDetails.product||'';const formattedShape=orderDetails.shape?shapeTranslations[orderDetails.shape]||orderDetails.shape:'';const formattedMaterial=orderDetails.material?materialTranslations[orderDetails.material]||orderDetails.material:'';const formattedColor=orderDetails.color?colorTranslations[orderDetails.color]||orderDetails.color:'';let formattedOptions='';if(orderDetails.options&&orderDetails.options.length>0){const translatedOptions=orderDetails.options.map(option=>optionTranslations[option]||option);formattedOptions=translatedOptions.join(', ');}const formattedDescription=orderDetails.customDescription||'';return{product:formattedProduct,size:orderDetails.size||'',shape:formattedShape,material:formattedMaterial,color:formattedColor,colorPreference:orderDetails.colorPreference||'',options:formattedOptions,customDescription:formattedDescription};};// –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã\nconst formattedOrderData=formatOrderData();const dataSource=[];// –¢–∏–ø –∏–∑–¥–µ–ª–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)\ndataSource.push({key:'product',parameter:'–¢–∏–ø –∏–∑–¥–µ–ª–∏—è',value:formattedOrderData.product});// –†–∞–∑–º–µ—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–º–æ–∫)\nif(orderDetails.product==='bag'&&formattedOrderData.size){dataSource.push({key:'size',parameter:'–†–∞–∑–º–µ—Ä',value:formattedOrderData.size});}// –§–æ—Ä–º–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–º–æ–∫)\nif(orderDetails.product==='bag'&&formattedOrderData.shape){dataSource.push({key:'shape',parameter:'–§–æ—Ä–º–∞',value:formattedOrderData.shape});}// –ú–∞—Ç–µ—Ä–∏–∞–ª\nif(formattedOrderData.material){dataSource.push({key:'material',parameter:'–ú–∞—Ç–µ—Ä–∏–∞–ª',value:formattedOrderData.material});}// –¶–≤–µ—Ç\nif(formattedOrderData.color){dataSource.push({key:'color',parameter:'–¶–≤–µ—Ç',value:formattedOrderData.color+(formattedOrderData.colorPreference?`\\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è: ${formattedOrderData.colorPreference}`:'')});}// –û–ø—Ü–∏–∏\nif(formattedOrderData.options){dataSource.push({key:'options',parameter:'–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏',value:formattedOrderData.options});}// –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–∫–∞–∑–∞\nif(formattedOrderData.customDescription){dataSource.push({key:'customDescription',parameter:'–û–ø–∏—Å–∞–Ω–∏–µ',value:formattedOrderData.customDescription});}// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã\nconst columns=[{title:'',dataIndex:'parameter',key:'parameter',width:'40%'},{title:'',dataIndex:'value',key:'value',width:'60%'}];// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∑–∞–∫–∞–∑–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ  \nconst generateOrderText=(orderData,contactInfo,sharedPhoneNumber)=>{console.log(\"[DEBUG] Generating order text with data:\",orderData);console.log(\"[DEBUG] Contact info:\",contactInfo);console.log(\"[DEBUG] Editable user info:\",editableUserInfo);const colorName=colorTranslations[orderData.color]||orderData.color;const colorPreferenceText=orderData.colorPreference?`\\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ —Ü–≤–µ—Ç—É: ${orderData.colorPreference}`:'';const orderText=`\nüõç –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\n\n–ò–∑–¥–µ–ª–∏–µ: ${orderData.product==='custom'?'–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑':orderData.product==='coaster'?'–ü–æ–¥—Å—Ç–∞–≤–∫–∞':'–°—É–º–∫–∞'}\n${orderData.product!=='custom'?`–†–∞–∑–º–µ—Ä: ${orderData.size}`:''}\n${orderData.product!=='custom'?`–§–æ—Ä–º–∞: ${shapeTranslations[orderData.shape]||orderData.shape}`:''}\n${orderData.product!=='custom'?`–ú–∞—Ç–µ—Ä–∏–∞–ª: ${materialTranslations[orderData.material]||orderData.material}`:''}\n${orderData.product!=='custom'?`–¶–≤–µ—Ç: ${colorName}${colorPreferenceText}`:''}\n${orderData.options&&orderData.options.length>0?`–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:\\n${orderData.options.map(opt=>`- ${optionTranslations[opt]||opt}`).join('\\n')}`:''}\n${orderData.customDescription?`\\n–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞:\\n${orderData.customDescription}`:''}\n\n–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\n–ò–º—è: ${editableUserInfo.name||'–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\nUsername: ${editableUserInfo.username?`@${editableUserInfo.username}`:'–ù–µ —É–∫–∞–∑–∞–Ω'}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${sharedPhoneNumber||'–ù–µ —É–∫–∞–∑–∞–Ω'}\n`;console.log(\"[DEBUG] Generated order text:\",orderText);return orderText;};const handleSubmit=async()=>{console.log(\"[DEBUG] handleSubmit called\");// –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π\nconst savedState=localStorage.getItem('editableUserInfo');console.log(\"[DEBUG] Saved state from localStorage:\",savedState);let currentState=editableUserInfo;if(savedState){try{currentState=JSON.parse(savedState);console.log(\"[DEBUG] Using state from localStorage:\",currentState);}catch(e){console.error('Error parsing saved state in handleSubmit:',e);}}console.log(\"[DEBUG] Current state for validation:\",currentState);setDebugInfo(prev=>prev+\"\\nhandleSubmit triggered\");if(!tgWebApp){const errorMessage=\"–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Telegram WebApp.\";console.error(errorMessage);setError(errorMessage);setDebugInfo(prev=>prev+\"\\nError: Telegram WebApp not initialized\");// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\ntry{await axiosInstance.post('/sendMessage',{chat_id:SELLER_CHAT_ID,text:`‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name||'–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username||'–ù–µ —É–∫–∞–∑–∞–Ω'}`,parse_mode:'Markdown'});}catch(e){console.error(\"Error sending error notification to seller:\",e);}return;}// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞\nif(!currentState.phone){const errorMessage='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞';console.log(\"[DEBUG] Phone validation failed. Current phone:\",currentState.phone);message.error(errorMessage);// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\ntry{await axiosInstance.post('/sendMessage',{chat_id:SELLER_CHAT_ID,text:`‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name||'–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username||'–ù–µ —É–∫–∞–∑–∞–Ω'}`,parse_mode:'Markdown'});}catch(e){console.error(\"Error sending error notification to seller:\",e);}return;}// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ\ntgWebApp.MainButton.showProgress(false);setIsSubmitting(true);setError(null);setSuccess(false);try{// –°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞\nconst orderText=generateOrderText(orderDetails,userInfo,currentState.phone);console.log(\"[DEBUG] Generated order text:\",orderText);try{const response=await axiosInstance.post('/sendMessage',{chat_id:SELLER_CHAT_ID,text:orderText,parse_mode:'Markdown'});console.log(\"[DEBUG] Message sent to seller successfully:\",response.data);setDebugInfo(prev=>prev+\"\\nMessage sent to seller successfully\");}catch(sellerError){const errorMessage=`–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü—É: ${(sellerError===null||sellerError===void 0?void 0:sellerError.message)||'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`;console.error(\"[DEBUG] Error sending message to seller:\",sellerError);setDebugInfo(prev=>prev+`\\nError sending message to seller: ${sellerError}`);// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\ntry{await axiosInstance.post('/sendMessage',{chat_id:SELLER_CHAT_ID,text:`‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name||'–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username||'–ù–µ —É–∫–∞–∑–∞–Ω'}\\n\\n–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:\\n${orderText}`,parse_mode:'Markdown'});}catch(e){console.error(\"Error sending error notification to seller:\",e);}throw new Error(errorMessage);}// –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ WebApp\nconst orderDataToSend={...orderDetails,user:{id:userInfo===null||userInfo===void 0?void 0:userInfo.id,name:currentState.name,username:currentState.username,phone:currentState.phone}};console.log(\"[DEBUG] Sending data to WebApp:\",orderDataToSend);tgWebApp.sendData(JSON.stringify(orderDataToSend));console.log(\"[DEBUG] Data sent to WebApp successfully\");setDebugInfo(prev=>prev+\"\\nData sent to WebApp successfully\");setSuccess(true);setError(null);}catch(e){const errorMessage=(e===null||e===void 0?void 0:e.message)||'–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';console.error('[DEBUG] Error in handleSubmit:',e);setError(errorMessage);setDebugInfo(prev=>prev+`\\nError in handleSubmit: ${e}`);// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\ntry{await axiosInstance.post('/sendMessage',{chat_id:SELLER_CHAT_ID,text:`‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name||'–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username||'–ù–µ —É–∫–∞–∑–∞–Ω'}\\n\\n–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:\\n${JSON.stringify(orderDetails,null,2)}`,parse_mode:'Markdown'});}catch(e){console.error(\"Error sending error notification to seller:\",e);}}finally{// –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏\ntgWebApp.MainButton.hideProgress();setIsSubmitting(false);}};const handleRequestPhone=()=>{var _window$Telegram2;console.log(\"[DEBUG] handleRequestPhone called\");if(!((_window$Telegram2=window.Telegram)!==null&&_window$Telegram2!==void 0&&_window$Telegram2.WebApp)){console.error('[DEBUG] Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');message.error('–û—à–∏–±–∫–∞: Telegram WebApp –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.');return;}setIsLoading(true);const webApp=window.Telegram.WebApp;console.log(\"[DEBUG] WebApp object:\",webApp);console.log(\"[DEBUG] WebApp version:\",webApp.version);console.log(\"[DEBUG] WebApp platform:\",webApp.platform);try{console.log(\"[DEBUG] Requesting contact\");webApp.requestContact(success=>{console.log(\"[DEBUG] Contact request callback, success:\",success);if(success){// –ö–æ–Ω—Ç–∞–∫—Ç –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω, –ø–æ–ª—É—á–∞–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ getRequestedContact\nconsole.log(\"[DEBUG] Contact request was successful\");webApp.invokeCustomMethod('getRequestedContact',{},(error,contact)=>{if(error){console.error('[DEBUG] Error getting contact:',error);message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞');setIsLoading(false);return;}try{// –î–µ–∫–æ–¥–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL-encoded —Å—Ç—Ä–æ–∫–∏\nconst params=new URLSearchParams(contact);const contactData=JSON.parse(decodeURIComponent(params.get('contact')||'{}'));console.log(\"[DEBUG] Received contact data:\",contactData);if(contactData.phone_number){console.log(\"[DEBUG] Setting phone number:\",contactData.phone_number);const formattedPhone=contactData.phone_number.startsWith('+')?contactData.phone_number:`+${contactData.phone_number}`;setPhoneNumber(formattedPhone);setEditableUserInfo(prev=>{const newState={...prev,phone:formattedPhone};console.log(\"[DEBUG] Updated editableUserInfo with phone:\",newState);localStorage.setItem('editableUserInfo',JSON.stringify(newState));return newState;});message.success('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—É—á–µ–Ω!');}else{console.warn(\"[DEBUG] No phone number in contact data\");message.error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');}}catch(parseError){console.error('[DEBUG] Error parsing contact data:',parseError);message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞');}finally{setIsLoading(false);}});}else{console.log(\"[DEBUG] Contact request was cancelled\");setIsLoading(false);message.info('–ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω');}});}catch(error){console.error('[DEBUG] Error in handleRequestPhone:',error);message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞');setIsLoading(false);}};// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏, —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏\nif(isSubmitting){return/*#__PURE__*/_jsx(Container,{style:{alignItems:'center',justifyContent:'center',height:'80vh'},children:/*#__PURE__*/_jsx(Spin,{size:\"large\",tip:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430...\"})});}if(success){return/*#__PURE__*/_jsx(Result,{status:\"success\",title:\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D!\",subTitle:\"\\u0421\\u043F\\u0430\\u0441\\u0438\\u0431\\u043E \\u0437\\u0430 \\u0432\\u0430\\u0448 \\u0437\\u0430\\u043A\\u0430\\u0437! \\u041C\\u044B \\u0441\\u043A\\u043E\\u0440\\u043E \\u0441\\u0432\\u044F\\u0436\\u0435\\u043C\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438.\",extra:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>tgWebApp===null||tgWebApp===void 0?void 0:tgWebApp.close(),children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"},\"close\")]});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(StyledTitle,{level:3,children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\"}),error&&/*#__PURE__*/_jsx(Alert,{message:error,type:\"error\",showIcon:true,style:{marginBottom:'16px'},closable:true,onClose:()=>setError(null)}),userInfo&&/*#__PURE__*/_jsx(StyledCard,{title:\"\\u0412\\u0430\\u0448\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:'block',marginBottom:'4px'},children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(Input,{value:editableUserInfo.name,onChange:e=>handleFieldChange('name',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:'block',marginBottom:'4px'},children:\"\\u041B\\u043E\\u0433\\u0438\\u043D:\"}),/*#__PURE__*/_jsx(Input,{value:editableUserInfo.username,onChange:e=>handleFieldChange('username',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043B\\u043E\\u0433\\u0438\\u043D\",addonBefore:\"@\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{style:{display:'block',marginBottom:'4px'},children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"}),phoneNumber?/*#__PURE__*/_jsx(Input,{value:editableUserInfo.phone||'',onChange:e=>handleFieldChange('phone',e.target.value),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"}):/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleRequestPhone,loading:isLoading,style:{width:'100%'},children:\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0438\\u0437 Telegram\"})]})]})}),/*#__PURE__*/_jsx(StyledCard,{title:\"\\u0414\\u0435\\u0442\\u0430\\u043B\\u0438 \\u0432\\u0430\\u0448\\u0435\\u0433\\u043E \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\",children:/*#__PURE__*/_jsx(Table,{dataSource:dataSource,columns:columns,pagination:false,bordered:true,size:\"small\"})}),/*#__PURE__*/_jsx(ButtonContainer,{children:/*#__PURE__*/_jsx(ActionButton,{onClick:onBack,disabled:isSubmitting,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})})]});};export default PreviewStep;","map":{"version":3,"names":["React","useState","useEffect","Typography","Button","Card","Table","Alert","Spin","Result","message","Input","styled","testProxyConnection","axiosInstance","jsx","_jsx","jsxs","_jsxs","Title","Container","div","StyledTitle","StyledCard","ButtonContainer","ActionButton","CloseButton","PreviewStep","_ref","_window$Telegram","orderDetails","onBack","onClose","tgWebApp","window","Telegram","WebApp","isSubmitting","setIsSubmitting","success","setSuccess","error","setError","userInfo","setUserInfo","debugInfo","setDebugInfo","contactRequested","setContactRequested","showContactRequest","setShowContactRequest","isLoading","setIsLoading","phoneNumber","setPhoneNumber","editableUserInfo","setEditableUserInfo","savedState","localStorage","getItem","parsedState","JSON","parse","console","log","e","fullName","first_name","last_name","trim","name","username","phone","SERVER_URL","SELLER_CHAT_ID","BOT_TOKEN","colorTranslations","optionTranslations","shapeTranslations","materialTranslations","mainButtonClickHandler","_tgWebApp$initDataUns","then","initDataUnsafe","user","prev","stringify","version","platform","MainButton","setText","show","color","textColor","handleSubmit","onClick","offClick","setItem","newState","handleFieldChange","field","value","formatOrderData","formattedProduct","product","formattedShape","shape","formattedMaterial","material","formattedColor","formattedOptions","options","length","translatedOptions","map","option","join","formattedDescription","customDescription","size","colorPreference","formattedOrderData","dataSource","push","key","parameter","columns","title","dataIndex","width","generateOrderText","orderData","contactInfo","sharedPhoneNumber","colorName","colorPreferenceText","orderText","opt","currentState","errorMessage","post","chat_id","text","parse_mode","showProgress","response","data","sellerError","Error","orderDataToSend","id","sendData","hideProgress","handleRequestPhone","_window$Telegram2","webApp","requestContact","invokeCustomMethod","contact","params","URLSearchParams","contactData","decodeURIComponent","get","phone_number","formattedPhone","startsWith","warn","parseError","info","style","alignItems","justifyContent","height","children","tip","status","subTitle","extra","type","close","level","showIcon","marginBottom","closable","display","flexDirection","gap","onChange","target","placeholder","addonBefore","loading","pagination","bordered","disabled"],"sources":["/Users/tumowuh/Desktop/backups/sumki-mini-app_Release_Vers_20250401_221838/src/components/PreviewStep.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Typography, Button, Card, Table, Alert, Spin, Result, message, Input } from 'antd/lib/index';\nimport styled from 'styled-components';\nimport { PreviewStepProps, TelegramUser } from '../types';\nimport { testProxyConnection, axiosInstance } from '../utils/proxyTest';\n\nconst { Title } = Typography;\n\n// –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–æ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–æ–π\nconst Container = styled.div`\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst StyledTitle = styled(Title)`\n  text-align: center;\n  margin-bottom: 20px !important;\n  color: #000000 !important;\n  font-size: 22px !important;\n  \n  @media (max-width: 320px) {\n    font-size: 20px !important;\n  }\n`;\n\nconst StyledCard = styled(Card)`\n  border-radius: 12px;\n  margin-bottom: 20px;\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);\n  \n  .ant-table {\n    background: transparent;\n  }\n  \n  .ant-table-thead > tr > th {\n    background-color: #f5f5f5;\n    color: rgba(0, 0, 0, 0.65);\n    font-weight: 500;\n  }\n  \n  .ant-table-tbody > tr > td {\n    color: #000000;\n  }\n  \n  .ant-table-thead > tr > th,\n  .ant-table-tbody > tr > td {\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n  \n  @media (max-width: 576px) {\n    .ant-table-thead > tr > th,\n    .ant-table-tbody > tr > td {\n      padding: 10px 12px;\n      font-size: 13px;\n    }\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n`;\n\nconst ActionButton = styled(Button)`\n  min-width: 100px;\n  height: 36px;\n  border-radius: 10px;\n  font-weight: 500;\n  \n  &.submit-button {\n    background-color: #1890ff;\n    border-color: #1890ff;\n    color: #ffffff;\n  }\n`;\n\nconst CloseButton = styled(Button)`\n  min-width: 100px;\n  background-color: #F2F2F7;\n  font-weight: 500;\n  height: 36px;\n  border-radius: 10px;\n  box-shadow: none;\n  border: 1px solid #E5E5EA;\n  color: #000000;\n  \n  &:hover {\n    border-color: #FF3B30;\n    color: #FF3B30;\n  }\n`;\n\nconst PreviewStep: React.FC<PreviewStepProps> = ({ orderDetails, onBack, onClose }) => {\n  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App\n  const tgWebApp = window.Telegram?.WebApp;\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [userInfo, setUserInfo] = useState<TelegramUser | null>(null);\n  const [debugInfo, setDebugInfo] = useState<string>('');\n  const [contactRequested, setContactRequested] = useState(false); // –§–ª–∞–≥, —á—Ç–æ –∫–æ–Ω—Ç–∞–∫—Ç –∑–∞–ø—Ä–æ—à–µ–Ω\n  const [showContactRequest, setShowContactRequest] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [phoneNumber, setPhoneNumber] = useState<string | null>(null);\n  const [editableUserInfo, setEditableUserInfo] = useState<{\n    name: string;\n    username: string;\n    phone: string | null;\n  }>(() => {\n    // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage\n    const savedState = localStorage.getItem('editableUserInfo');\n    if (savedState) {\n      try {\n        const parsedState = JSON.parse(savedState);\n        console.log(\"[DEBUG] Restored state from localStorage:\", parsedState);\n        return parsedState;\n      } catch (e) {\n        console.error('Error parsing saved state:', e);\n      }\n    }\n    \n    // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n    if (userInfo) {\n      const fullName = `${userInfo.first_name} ${userInfo.last_name || ''}`.trim();\n      return {\n        name: fullName,\n        username: userInfo.username || '',\n        phone: null\n      };\n    }\n    \n    return {\n      name: '',\n      username: '',\n      phone: null\n    };\n  });\n  \n  // –°–µ—Ä–≤–µ—Ä —Å –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π\n  const SERVER_URL = \"https://telegram-bot-webhook-proxy.vercel.app/api/send-message\";\n  \n  // ID –ø—Ä–æ–¥–∞–≤—Ü–∞ –∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞\n  const SELLER_CHAT_ID = \"50122963\";\n  const BOT_TOKEN = \"7408506728:AAGK9d5kddSnMQDwgIYOiEK-6nPFFwgYP-M\";\n  \n  // –ü–µ—Ä–µ–≤–æ–¥ —Ü–≤–µ—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\n  const colorTranslations: {[key: string]: string} = {\n    'pink': '–†–æ–∑–æ–≤—ã–π',\n    'red': '–ö—Ä–∞—Å–Ω—ã–π',\n    'blue': '–°–∏–Ω–∏–π',\n    'green': '–ó–µ–ª–µ–Ω—ã–π',\n    'yellow': '–ñ–µ–ª—Ç—ã–π',\n    'black': '–ß–µ—Ä–Ω—ã–π',\n    'white': '–ë–µ–ª—ã–π',\n    'purple': '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π',\n    'orange': '–û—Ä–∞–Ω–∂–µ–≤—ã–π',\n    'gray': '–°–µ—Ä—ã–π',\n    'brown': '–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π',\n    'gold': '–ó–æ–ª–æ—Ç–æ–π',\n    'silver': '–°–µ—Ä–µ–±—Ä—è–Ω—ã–π',\n    'darkred': '–¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π',\n    'darkblue': '–¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π',\n    'darkgreen': '–¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π',\n    '#f5222d': '–ö—Ä–∞—Å–Ω—ã–π',\n    '#eb2f96': '–†–æ–∑–æ–≤—ã–π',\n    '#722ed1': '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π',\n    '#1890ff': '–°–∏–Ω–∏–π',\n    '#13c2c2': '–ì–æ–ª—É–±–æ–π',\n    '#52c41a': '–ó–µ–ª–µ–Ω—ã–π',\n    '#fadb14': '–ñ–µ–ª—Ç—ã–π',\n    '#fa8c16': '–û—Ä–∞–Ω–∂–µ–≤—ã–π',\n    '#000000': '–ß–µ—Ä–Ω—ã–π',\n    '#8c8c8c': '–°–µ—Ä—ã–π',\n    '#ffffff': '–ë–µ–ª—ã–π',\n    '#8B0000': '–¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π',\n    '#00008B': '–¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π',\n    '#006400': '–¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π',\n    '#FFC0CB': '–†–æ–∑–æ–≤—ã–π'\n  };\n  \n  // –ü–µ—Ä–µ–≤–æ–¥ –æ–ø—Ü–∏–π –Ω–∞ —Ä—É—Å—Å–∫–∏–π\n  const optionTranslations: {[key: string]: string} = {\n    'clasp': '–ó–∞—Å—Ç–µ–∂–∫–∞',\n    'lining': '–ü–æ–¥–∫–ª–∞–¥–∫–∞',\n    'chain': '–¶–µ–ø–æ—á–∫–∞',\n    'short_handle': '–ö–æ—Ä–æ—Ç–∫–∞—è —Ä—É—á–∫–∞',\n    'long_handle': '–î–ª–∏–Ω–Ω–∞—è —Ä—É—á–∫–∞',\n    'pocket': '–ö–∞—Ä–º–∞–Ω',\n    'zipper': '–ú–æ–ª–Ω–∏—è',\n    'embroidery': '–í—ã—à–∏–≤–∫–∞',\n    'custom_color': '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç'\n  };\n  \n  // –ü–µ—Ä–µ–≤–æ–¥ —Ñ–æ—Ä–º –Ω–∞ —Ä—É—Å—Å–∫–∏–π\n  const shapeTranslations: {[key: string]: string} = {\n    'kruglaya': '–ö—Ä—É–≥–ª–∞—è',\n    'pryamougolnaya': '–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è',\n    'kvadratnaya': '–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è',\n    'trapeciya': '–¢—Ä–∞–ø–µ—Ü–∏—è',\n    'mesyac': '–ú–µ—Å—è—Ü',\n    'serdce': '–°–µ—Ä–¥—Ü–µ',\n    'round': '–ö—Ä—É–≥–ª–∞—è',\n    'rectangular': '–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è',\n    'square': '–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è',\n    'trapezoid': '–¢—Ä–∞–ø–µ—Ü–∏—è',\n    'crescent': '–ú–µ—Å—è—Ü',\n    'heart': '–°–µ—Ä–¥—Ü–µ'\n  };\n  \n  // –ü–µ—Ä–µ–≤–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π\n  const materialTranslations: {[key: string]: string} = {\n    'akril': '–ê–∫—Ä–∏–ª',\n    'hrustal': '–•—Ä—É—Å—Ç–∞–ª—å',\n    'swarovski': 'Swarovski',\n    'acrylic': '–ê–∫—Ä–∏–ª',\n    'crystal': '–•—Ä—É—Å—Ç–∞–ª—å'\n  };\n  \n  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞\n  useEffect(() => {\n    let mainButtonClickHandler: (() => void) | null = null;\n    try {\n      // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—É\n      testProxyConnection().then(success => {\n        if (!success) {\n          console.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—É\");\n          setError(\"–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π\");\n        }\n      });\n\n      if (tgWebApp?.initDataUnsafe?.user) {\n        console.log(\"User data available:\", tgWebApp.initDataUnsafe.user);\n        setUserInfo(tgWebApp.initDataUnsafe.user as TelegramUser);\n        setDebugInfo(prev => prev + `\\nUser data: ${JSON.stringify(tgWebApp.initDataUnsafe.user)}`);\n      } else {\n        console.log(\"No user data available\");\n        setDebugInfo(prev => prev + '\\nNo user data available');\n      }\n      \n      console.log(\"Full WebApp data:\", tgWebApp);\n      setDebugInfo(prev => prev + `\\nTelegram WebApp available: ${!!tgWebApp}`);\n      \n      if (tgWebApp) {\n        setDebugInfo(prev => prev + `\\nVersion: ${tgWebApp.version}`);\n        setDebugInfo(prev => prev + `\\nPlatform: ${tgWebApp.platform}`);\n        \n        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º MainButton - –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç userInfo\n        if (tgWebApp.MainButton) {\n          tgWebApp.MainButton.setText('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑');\n          tgWebApp.MainButton.show();\n          tgWebApp.MainButton.color = '#1890ff';\n          tgWebApp.MainButton.textColor = '#ffffff';\n          \n          mainButtonClickHandler = handleSubmit;\n          tgWebApp.MainButton.onClick(mainButtonClickHandler);\n          console.log(\"MainButton configured with handleSubmit\");\n          setDebugInfo(prev => prev + \"\\nMainButton configured with handleSubmit\");\n        }\n      }\n    } catch (e) {\n      console.error(\"Error initializing component or accessing user data\", e);\n      setDebugInfo(prev => prev + `\\nError initializing: ${e}`);\n      setError(\"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.\");\n    }\n    \n    // –û—á–∏—Å—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\n    return () => {\n      if (tgWebApp?.MainButton && mainButtonClickHandler) {\n          tgWebApp.MainButton.offClick(mainButtonClickHandler);\n      }\n    };\n  }, [tgWebApp]); // –£–±–∏—Ä–∞–µ–º userInfo –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∞—Å—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö\n\n  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ localStorage –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏\n  useEffect(() => {\n    localStorage.setItem('editableUserInfo', JSON.stringify(editableUserInfo));\n  }, [editableUserInfo]);\n\n  // –û–±–Ω–æ–≤–ª—è–µ–º editableUserInfo –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ phoneNumber\n  useEffect(() => {\n    if (phoneNumber) {\n      console.log(\"[DEBUG] Updating editableUserInfo with phoneNumber:\", phoneNumber);\n      setEditableUserInfo(prev => {\n        const newState = {\n          ...prev,\n          phone: phoneNumber\n        };\n        console.log(\"[DEBUG] New editableUserInfo state after phone update:\", newState);\n        localStorage.setItem('editableUserInfo', JSON.stringify(newState));\n        return newState;\n      });\n    }\n  }, [phoneNumber]);\n\n  // –û–±–Ω–æ–≤–ª—è–µ–º editableUserInfo –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ userInfo\n  useEffect(() => {\n    if (userInfo) {\n      console.log(\"[DEBUG] Updating editableUserInfo with userInfo:\", userInfo);\n      const fullName = `${userInfo.first_name} ${userInfo.last_name || ''}`.trim();\n      console.log(\"[DEBUG] Full name:\", fullName);\n      setEditableUserInfo(prev => {\n        const newState = {\n          name: fullName,\n          username: userInfo.username || '',\n          phone: prev.phone || phoneNumber\n        };\n        console.log(\"[DEBUG] New editableUserInfo state after userInfo update:\", newState);\n        localStorage.setItem('editableUserInfo', JSON.stringify(newState));\n        return newState;\n      });\n    }\n  }, [userInfo, phoneNumber]);\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π\n  const handleFieldChange = (field: string, value: string) => {\n    console.log(\"[DEBUG] handleFieldChange called with field:\", field, \"value:\", value);\n    setEditableUserInfo(prev => {\n      const newState = {\n        ...prev,\n        [field]: value\n      };\n      console.log(\"[DEBUG] New editableUserInfo state:\", newState);\n      localStorage.setItem('editableUserInfo', JSON.stringify(newState));\n      return newState;\n    });\n  };\n\n  // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞\n  const formatOrderData = () => {\n    console.log('Formatting order data from:', orderDetails);\n    \n    const formattedProduct = orderDetails.product === 'bag' ? '–°—É–º–∫–∞' : \n                            orderDetails.product === 'coaster' ? '–ü–æ–¥—Å—Ç–∞–∫–∞–Ω–Ω–∏–∫' : \n                            orderDetails.product === 'custom' ? '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑' : \n                            orderDetails.product || '';\n    \n    const formattedShape = orderDetails.shape ? (shapeTranslations[orderDetails.shape] || orderDetails.shape) : '';\n    \n    const formattedMaterial = orderDetails.material ? \n                             (materialTranslations[orderDetails.material] || orderDetails.material) : '';\n    \n    const formattedColor = orderDetails.color ? \n                          (colorTranslations[orderDetails.color] || orderDetails.color) : '';\n    \n    let formattedOptions = '';\n    if (orderDetails.options && orderDetails.options.length > 0) {\n      const translatedOptions = orderDetails.options.map(option => \n        optionTranslations[option] || option\n      );\n      formattedOptions = translatedOptions.join(', ');\n    }\n    \n    const formattedDescription = orderDetails.customDescription || '';\n    \n    return {\n      product: formattedProduct,\n      size: orderDetails.size || '',\n      shape: formattedShape,\n      material: formattedMaterial,\n      color: formattedColor,\n      colorPreference: orderDetails.colorPreference || '',\n      options: formattedOptions,\n      customDescription: formattedDescription\n    };\n  };\n  \n  // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã\n  const formattedOrderData = formatOrderData();\n  const dataSource = [];\n  \n  // –¢–∏–ø –∏–∑–¥–µ–ª–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)\n  dataSource.push({\n    key: 'product',\n    parameter: '–¢–∏–ø –∏–∑–¥–µ–ª–∏—è',\n    value: formattedOrderData.product\n  });\n  \n  // –†–∞–∑–º–µ—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–º–æ–∫)\n  if (orderDetails.product === 'bag' && formattedOrderData.size) {\n    dataSource.push({\n      key: 'size',\n      parameter: '–†–∞–∑–º–µ—Ä',\n      value: formattedOrderData.size\n    });\n  }\n  \n  // –§–æ—Ä–º–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–º–æ–∫)\n  if (orderDetails.product === 'bag' && formattedOrderData.shape) {\n    dataSource.push({\n      key: 'shape',\n      parameter: '–§–æ—Ä–º–∞',\n      value: formattedOrderData.shape\n    });\n  }\n  \n  // –ú–∞—Ç–µ—Ä–∏–∞–ª\n  if (formattedOrderData.material) {\n    dataSource.push({\n      key: 'material',\n      parameter: '–ú–∞—Ç–µ—Ä–∏–∞–ª',\n      value: formattedOrderData.material\n    });\n  }\n  \n  // –¶–≤–µ—Ç\n  if (formattedOrderData.color) {\n    dataSource.push({\n      key: 'color',\n      parameter: '–¶–≤–µ—Ç',\n      value: formattedOrderData.color + (formattedOrderData.colorPreference ? `\\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è: ${formattedOrderData.colorPreference}` : '')\n    });\n  }\n  \n  // –û–ø—Ü–∏–∏\n  if (formattedOrderData.options) {\n    dataSource.push({\n      key: 'options',\n      parameter: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏',\n      value: formattedOrderData.options\n    });\n  }\n  \n  // –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–∫–∞–∑–∞\n  if (formattedOrderData.customDescription) {\n    dataSource.push({\n      key: 'customDescription',\n      parameter: '–û–ø–∏—Å–∞–Ω–∏–µ',\n      value: formattedOrderData.customDescription\n    });\n  }\n  \n  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã\n  const columns = [\n    {\n      title: '',\n      dataIndex: 'parameter',\n      key: 'parameter',\n      width: '40%',\n    },\n    {\n      title: '',\n      dataIndex: 'value',\n      key: 'value',\n      width: '60%',\n    }\n  ];\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∑–∞–∫–∞–∑–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ  \n  const generateOrderText = (orderData: any, contactInfo: TelegramUser | null, sharedPhoneNumber?: string) => {\n    console.log(\"[DEBUG] Generating order text with data:\", orderData);\n    console.log(\"[DEBUG] Contact info:\", contactInfo);\n    console.log(\"[DEBUG] Editable user info:\", editableUserInfo);\n    \n    const colorName = colorTranslations[orderData.color] || orderData.color;\n    const colorPreferenceText = orderData.colorPreference ? `\\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ —Ü–≤–µ—Ç—É: ${orderData.colorPreference}` : '';\n    \n    const orderText = `\nüõç –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\n\n–ò–∑–¥–µ–ª–∏–µ: ${orderData.product === 'custom' ? '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑' : orderData.product === 'coaster' ? '–ü–æ–¥—Å—Ç–∞–≤–∫–∞' : '–°—É–º–∫–∞'}\n${orderData.product !== 'custom' ? `–†–∞–∑–º–µ—Ä: ${orderData.size}` : ''}\n${orderData.product !== 'custom' ? `–§–æ—Ä–º–∞: ${shapeTranslations[orderData.shape] || orderData.shape}` : ''}\n${orderData.product !== 'custom' ? `–ú–∞—Ç–µ—Ä–∏–∞–ª: ${materialTranslations[orderData.material] || orderData.material}` : ''}\n${orderData.product !== 'custom' ? `–¶–≤–µ—Ç: ${colorName}${colorPreferenceText}` : ''}\n${orderData.options && orderData.options.length > 0 ? `–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:\\n${orderData.options.map((opt: string) => `- ${optionTranslations[opt] || opt}`).join('\\n')}` : ''}\n${orderData.customDescription ? `\\n–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞:\\n${orderData.customDescription}` : ''}\n\n–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:\n–ò–º—è: ${editableUserInfo.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\nUsername: ${editableUserInfo.username ? `@${editableUserInfo.username}` : '–ù–µ —É–∫–∞–∑–∞–Ω'}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${sharedPhoneNumber || '–ù–µ —É–∫–∞–∑–∞–Ω'}\n`;\n\n    console.log(\"[DEBUG] Generated order text:\", orderText);\n    return orderText;\n  };\n\n  const handleSubmit = async () => {\n    console.log(\"[DEBUG] handleSubmit called\");\n    \n    // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π\n    const savedState = localStorage.getItem('editableUserInfo');\n    console.log(\"[DEBUG] Saved state from localStorage:\", savedState);\n    \n    let currentState = editableUserInfo;\n    if (savedState) {\n      try {\n        currentState = JSON.parse(savedState);\n        console.log(\"[DEBUG] Using state from localStorage:\", currentState);\n      } catch (e) {\n        console.error('Error parsing saved state in handleSubmit:', e);\n      }\n    }\n    \n    console.log(\"[DEBUG] Current state for validation:\", currentState);\n    setDebugInfo(prev => prev + \"\\nhandleSubmit triggered\");\n\n    if (!tgWebApp) {\n      const errorMessage = \"–û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Telegram WebApp.\";\n      console.error(errorMessage);\n      setError(errorMessage);\n      setDebugInfo(prev => prev + \"\\nError: Telegram WebApp not initialized\");\n      \n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\n      try {\n        await axiosInstance.post('/sendMessage', {\n          chat_id: SELLER_CHAT_ID,\n          text: `‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}`,\n          parse_mode: 'Markdown'\n        });\n      } catch (e) {\n        console.error(\"Error sending error notification to seller:\", e);\n      }\n      return;\n    }\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n    if (!currentState.phone) {\n      const errorMessage = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞';\n      console.log(\"[DEBUG] Phone validation failed. Current phone:\", currentState.phone);\n      message.error(errorMessage);\n      \n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\n      try {\n        await axiosInstance.post('/sendMessage', {\n          chat_id: SELLER_CHAT_ID,\n          text: `‚ö†Ô∏è –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}`,\n          parse_mode: 'Markdown'\n        });\n      } catch (e) {\n        console.error(\"Error sending error notification to seller:\", e);\n      }\n      return;\n    }\n\n    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ\n    tgWebApp.MainButton.showProgress(false);\n    setIsSubmitting(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      // –°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞\n      const orderText = generateOrderText(orderDetails, userInfo, currentState.phone);\n      console.log(\"[DEBUG] Generated order text:\", orderText);\n      \n      try {\n        const response = await axiosInstance.post('/sendMessage', {\n          chat_id: SELLER_CHAT_ID,\n          text: orderText,\n          parse_mode: 'Markdown'\n        });\n        \n        console.log(\"[DEBUG] Message sent to seller successfully:\", response.data);\n        setDebugInfo(prev => prev + \"\\nMessage sent to seller successfully\");\n      } catch (sellerError: any) {\n        const errorMessage = `–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü—É: ${sellerError?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`;\n        console.error(\"[DEBUG] Error sending message to seller:\", sellerError);\n        setDebugInfo(prev => prev + `\\nError sending message to seller: ${sellerError}`);\n        \n        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\n        try {\n          await axiosInstance.post('/sendMessage', {\n            chat_id: SELLER_CHAT_ID,\n            text: `‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}\\n\\n–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:\\n${orderText}`,\n            parse_mode: 'Markdown'\n          });\n        } catch (e) {\n          console.error(\"Error sending error notification to seller:\", e);\n        }\n        \n        throw new Error(errorMessage);\n      }\n\n      // –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ WebApp\n      const orderDataToSend = {\n        ...orderDetails,\n        user: {\n          id: userInfo?.id,\n          name: currentState.name,\n          username: currentState.username,\n          phone: currentState.phone\n        }\n      };\n      \n      console.log(\"[DEBUG] Sending data to WebApp:\", orderDataToSend);\n      tgWebApp.sendData(JSON.stringify(orderDataToSend));\n      console.log(\"[DEBUG] Data sent to WebApp successfully\");\n      setDebugInfo(prev => prev + \"\\nData sent to WebApp successfully\");\n      \n      setSuccess(true);\n      setError(null);\n\n    } catch (e: any) {\n      const errorMessage = e?.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';\n      console.error('[DEBUG] Error in handleSubmit:', e);\n      setError(errorMessage);\n      setDebugInfo(prev => prev + `\\nError in handleSubmit: ${e}`);\n      \n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ –ø—Ä–æ–¥–∞–≤—Ü—É\n      try {\n        await axiosInstance.post('/sendMessage', {\n          chat_id: SELLER_CHAT_ID,\n          text: `‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:\\n${errorMessage}\\n\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentState.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\\nUsername: ${currentState.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}\\n\\n–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞:\\n${JSON.stringify(orderDetails, null, 2)}`,\n          parse_mode: 'Markdown'\n        });\n      } catch (e) {\n        console.error(\"Error sending error notification to seller:\", e);\n      }\n    } finally {\n      // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏\n      tgWebApp.MainButton.hideProgress();\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleRequestPhone = () => {\n    console.log(\"[DEBUG] handleRequestPhone called\");\n    if (!window.Telegram?.WebApp) {\n      console.error('[DEBUG] Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');\n      message.error('–û—à–∏–±–∫–∞: Telegram WebApp –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.');\n      return;\n    }\n\n    setIsLoading(true);\n    const webApp = window.Telegram.WebApp;\n    console.log(\"[DEBUG] WebApp object:\", webApp);\n    console.log(\"[DEBUG] WebApp version:\", webApp.version);\n    console.log(\"[DEBUG] WebApp platform:\", webApp.platform);\n\n    try {\n      console.log(\"[DEBUG] Requesting contact\");\n      webApp.requestContact((success: boolean) => {\n        console.log(\"[DEBUG] Contact request callback, success:\", success);\n        if (success) {\n          // –ö–æ–Ω—Ç–∞–∫—Ç –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω, –ø–æ–ª—É—á–∞–µ–º –µ–≥–æ —á–µ—Ä–µ–∑ getRequestedContact\n          console.log(\"[DEBUG] Contact request was successful\");\n          webApp.invokeCustomMethod('getRequestedContact', {}, (error: any, contact: string) => {\n            if (error) {\n              console.error('[DEBUG] Error getting contact:', error);\n              message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞');\n              setIsLoading(false);\n              return;\n            }\n\n            try {\n              // –î–µ–∫–æ–¥–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL-encoded —Å—Ç—Ä–æ–∫–∏\n              const params = new URLSearchParams(contact);\n              const contactData = JSON.parse(decodeURIComponent(params.get('contact') || '{}'));\n              console.log(\"[DEBUG] Received contact data:\", contactData);\n\n              if (contactData.phone_number) {\n                console.log(\"[DEBUG] Setting phone number:\", contactData.phone_number);\n                const formattedPhone = contactData.phone_number.startsWith('+') ? \n                  contactData.phone_number : \n                  `+${contactData.phone_number}`;\n                \n                setPhoneNumber(formattedPhone);\n                setEditableUserInfo(prev => {\n                  const newState = {\n                    ...prev,\n                    phone: formattedPhone\n                  };\n                  console.log(\"[DEBUG] Updated editableUserInfo with phone:\", newState);\n                  localStorage.setItem('editableUserInfo', JSON.stringify(newState));\n                  return newState;\n                });\n                message.success('–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—É—á–µ–Ω!');\n              } else {\n                console.warn(\"[DEBUG] No phone number in contact data\");\n                message.error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');\n              }\n            } catch (parseError) {\n              console.error('[DEBUG] Error parsing contact data:', parseError);\n              message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞');\n            } finally {\n              setIsLoading(false);\n            }\n          });\n        } else {\n          console.log(\"[DEBUG] Contact request was cancelled\");\n          setIsLoading(false);\n          message.info('–ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω');\n        }\n      });\n    } catch (error) {\n      console.error('[DEBUG] Error in handleRequestPhone:', error);\n      message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞');\n      setIsLoading(false);\n    }\n  };\n\n  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏, —É—Å–ø–µ—Ö–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏\n  if (isSubmitting) {\n    return <Container style={{ alignItems: 'center', justifyContent: 'center', height: '80vh' }}><Spin size=\"large\" tip=\"–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞...\" /></Container>;\n  }\n\n  if (success) {\n    return (\n      <Result\n        status=\"success\"\n        title=\"–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!\"\n        subTitle=\"–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∑–∞–∫–∞–∑! –ú—ã —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.\"\n        extra={[\n          <Button type=\"primary\" key=\"close\" onClick={() => tgWebApp?.close()}>\n            –ó–∞–∫—Ä—ã—Ç—å\n          </Button>,\n        ]}\n      />\n    );\n  }\n\n  return (\n    <Container>\n      <StyledTitle level={3}>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</StyledTitle>\n      \n      {error && <Alert message={error} type=\"error\" showIcon style={{ marginBottom: '16px' }} closable onClose={() => setError(null)} />}\n      \n      {/* –í—ã–≤–æ–¥ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */} \n      {/* <Alert message={<pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>{debugInfo}</pre>} type=\"info\" style={{ marginBottom: '16px' }} /> */}\n      \n      {userInfo && (\n        <StyledCard title=\"–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ\">\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n            <div>\n              <strong style={{ display: 'block', marginBottom: '4px' }}>–ò–º—è:</strong>\n              <Input\n                value={editableUserInfo.name}\n                onChange={(e) => handleFieldChange('name', e.target.value)}\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è\"\n              />\n            </div>\n            <div>\n              <strong style={{ display: 'block', marginBottom: '4px' }}>–õ–æ–≥–∏–Ω:</strong>\n              <Input\n                value={editableUserInfo.username}\n                onChange={(e) => handleFieldChange('username', e.target.value)}\n                placeholder=\"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω\"\n                addonBefore=\"@\"\n              />\n            </div>\n            <div>\n              <strong style={{ display: 'block', marginBottom: '4px' }}>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>\n              {phoneNumber ? (\n                <Input\n                  value={editableUserInfo.phone || ''}\n                  onChange={(e) => handleFieldChange('phone', e.target.value)}\n                  placeholder=\"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞\"\n                />\n              ) : (\n                <Button \n                  type=\"primary\" \n                  onClick={handleRequestPhone} \n                  loading={isLoading}\n                  style={{ width: '100%' }}\n                >\n                  –ü–æ–ª—É—á–∏—Ç—å –∏–∑ Telegram\n                </Button>\n              )}\n            </div>\n          </div>\n        </StyledCard>\n      )}\n      \n      <StyledCard title=\"–î–µ—Ç–∞–ª–∏ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞\">\n        <Table\n          dataSource={dataSource}\n          columns={columns}\n          pagination={false}\n          bordered\n          size=\"small\"\n        />\n      </StyledCard>\n\n      <ButtonContainer>\n        <ActionButton onClick={onBack} disabled={isSubmitting}>–ù–∞–∑–∞–¥</ActionButton>\n      </ButtonContainer>\n    </Container>\n  );\n};\n\nexport default PreviewStep; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}