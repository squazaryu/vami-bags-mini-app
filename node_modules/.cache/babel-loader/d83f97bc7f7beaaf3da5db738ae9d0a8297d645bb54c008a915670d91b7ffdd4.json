{"ast":null,"code":"import React,{useState}from'react';import{Typography,Card,Form,Input,Button,message}from'antd';import'./OrderFormStep.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text}=Typography;const{TextArea}=Input;const OrderFormStep=_ref=>{let{orderData,onBack,onSubmit}=_ref;const[form]=Form.useForm();const[loading,setLoading]=useState(false);const handleSubmit=async values=>{setLoading(true);try{var _window$Telegram;const finalOrderData={...orderData,...values};// Отправляем данные в Telegram бот\nif((_window$Telegram=window.Telegram)!==null&&_window$Telegram!==void 0&&_window$Telegram.WebApp){const data=JSON.stringify(finalOrderData);window.Telegram.WebApp.sendData(data);// Показываем сообщение об успехе\nwindow.Telegram.WebApp.showAlert('Заказ успешно отправлен! Мы свяжемся с вами в ближайшее время.');// Закрываем веб-приложение\nsetTimeout(()=>{window.Telegram.WebApp.close();},2000);}else{// Fallback для тестирования вне Telegram\nconsole.log('Order data:',finalOrderData);message.success('Заказ успешно отправлен!');onSubmit(finalOrderData);}}catch(error){console.error('Error submitting order:',error);message.error('Ошибка при отправке заказа. Попробуйте еще раз.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"order-form-step\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-header\",children:[/*#__PURE__*/_jsx(Title,{level:3,children:\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0438 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044F \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-content\",children:/*#__PURE__*/_jsx(Card,{className:\"form-card\",children:/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleSubmit,initialValues:{customerName:orderData.customerName,customerPhone:orderData.customerPhone,customerAddress:orderData.customerAddress},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0418\\u043C\\u044F\",name:\"customerName\",rules:[{required:true,message:'Пожалуйста, введите ваше имя'},{min:2,message:'Имя должно содержать минимум 2 символа'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\",size:\"large\",className:\"form-input\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\",name:\"customerPhone\",rules:[{required:true,message:'Пожалуйста, введите номер телефона'},{pattern:/^(\\+7|7|8)?[\\s-]?\\(?[489][0-9]{2}\\)?[\\s-]?[0-9]{3}[\\s-]?[0-9]{2}[\\s-]?[0-9]{2}$/,message:'Введите корректный номер телефона'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"+7 (999) 123-45-67\",size:\"large\",className:\"form-input\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\",name:\"customerAddress\",rules:[{required:true,message:'Пожалуйста, введите адрес доставки'},{min:10,message:'Адрес должен содержать минимум 10 символов'}],children:/*#__PURE__*/_jsx(TextArea,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u043D\\u044B\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\",rows:3,className:\"form-textarea\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u043E\\u0436\\u0435\\u043B\\u0430\\u043D\\u0438\\u044F\",name:\"additionalNotes\",initialValue:orderData.additionalNotes,children:/*#__PURE__*/_jsx(TextArea,{placeholder:\"\\u041E\\u0441\\u043E\\u0431\\u044B\\u0435 \\u0442\\u0440\\u0435\\u0431\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443, \\u043F\\u043E\\u0436\\u0435\\u043B\\u0430\\u043D\\u0438\\u044F \\u043F\\u043E \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0435 \\u0438 \\u0442.\\u0434.\",rows:4,className:\"form-textarea\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"default\",size:\"large\",onClick:onBack,className:\"back-button\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",htmlType:\"submit\",loading:loading,className:\"submit-button\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]})]})})})]});};export default OrderFormStep;","map":{"version":3,"names":["React","useState","Typography","Card","Form","Input","Button","message","jsx","_jsx","jsxs","_jsxs","Title","Text","TextArea","OrderFormStep","_ref","orderData","onBack","onSubmit","form","useForm","loading","setLoading","handleSubmit","values","_window$Telegram","finalOrderData","window","Telegram","WebApp","data","JSON","stringify","sendData","showAlert","setTimeout","close","console","log","success","error","className","children","level","type","layout","onFinish","initialValues","customerName","customerPhone","customerAddress","Item","label","name","rules","required","min","placeholder","size","pattern","rows","initialValue","additionalNotes","onClick","htmlType"],"sources":["/Users/tumowuh/Desktop/backups/sumki-mini-app_Release_Vers_20250401_221838/src/components/OrderFormStep.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Typography, Card, Form, Input, Button, message } from 'antd';\nimport { OrderForm as OrderFormType } from '../types';\nimport './OrderFormStep.css';\n\nconst { Title, Text } = Typography;\nconst { TextArea } = Input;\n\ninterface OrderFormStepProps {\n  orderData: OrderFormType;\n  onBack: () => void;\n  onSubmit: (formData: any) => void;\n}\n\nconst OrderFormStep: React.FC<OrderFormStepProps> = ({\n  orderData,\n  onBack,\n  onSubmit\n}) => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (values: any) => {\n    setLoading(true);\n    try {\n      const finalOrderData = { ...orderData, ...values };\n      \n      // Отправляем данные в Telegram бот\n      if (window.Telegram?.WebApp) {\n        const data = JSON.stringify(finalOrderData);\n        window.Telegram.WebApp.sendData(data);\n        \n        // Показываем сообщение об успехе\n        window.Telegram.WebApp.showAlert('Заказ успешно отправлен! Мы свяжемся с вами в ближайшее время.');\n        \n        // Закрываем веб-приложение\n        setTimeout(() => {\n          window.Telegram.WebApp.close();\n        }, 2000);\n      } else {\n        // Fallback для тестирования вне Telegram\n        console.log('Order data:', finalOrderData);\n        message.success('Заказ успешно отправлен!');\n        onSubmit(finalOrderData);\n      }\n    } catch (error) {\n      console.error('Error submitting order:', error);\n      message.error('Ошибка при отправке заказа. Попробуйте еще раз.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"order-form-step\">\n      <div className=\"step-header\">\n        <Title level={3}>Контактные данные</Title>\n        <Text type=\"secondary\">Укажите ваши контактные данные для оформления заказа</Text>\n      </div>\n\n      <div className=\"form-content\">\n        <Card className=\"form-card\">\n          <Form\n            form={form}\n            layout=\"vertical\"\n            onFinish={handleSubmit}\n            initialValues={{\n              customerName: orderData.customerName,\n              customerPhone: orderData.customerPhone,\n              customerAddress: orderData.customerAddress\n            }}\n          >\n            <Form.Item\n              label=\"Имя\"\n              name=\"customerName\"\n              rules={[\n                { required: true, message: 'Пожалуйста, введите ваше имя' },\n                { min: 2, message: 'Имя должно содержать минимум 2 символа' }\n              ]}\n            >\n              <Input \n                placeholder=\"Введите ваше имя\"\n                size=\"large\"\n                className=\"form-input\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"Телефон\"\n              name=\"customerPhone\"\n              rules={[\n                { required: true, message: 'Пожалуйста, введите номер телефона' },\n                { \n                  pattern: /^(\\+7|7|8)?[\\s-]?\\(?[489][0-9]{2}\\)?[\\s-]?[0-9]{3}[\\s-]?[0-9]{2}[\\s-]?[0-9]{2}$/,\n                  message: 'Введите корректный номер телефона'\n                }\n              ]}\n            >\n              <Input \n                placeholder=\"+7 (999) 123-45-67\"\n                size=\"large\"\n                className=\"form-input\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"Адрес доставки\"\n              name=\"customerAddress\"\n              rules={[\n                { required: true, message: 'Пожалуйста, введите адрес доставки' },\n                { min: 10, message: 'Адрес должен содержать минимум 10 символов' }\n              ]}\n            >\n              <TextArea \n                placeholder=\"Введите полный адрес доставки\"\n                rows={3}\n                className=\"form-textarea\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"Дополнительные пожелания\"\n              name=\"additionalNotes\"\n              initialValue={orderData.additionalNotes}\n            >\n              <TextArea \n                placeholder=\"Особые требования к заказу, пожелания по доставке и т.д.\"\n                rows={4}\n                className=\"form-textarea\"\n              />\n            </Form.Item>\n\n            <div className=\"form-actions\">\n              <Button \n                type=\"default\" \n                size=\"large\" \n                onClick={onBack}\n                className=\"back-button\"\n              >\n                Назад\n              </Button>\n              <Button \n                type=\"primary\" \n                size=\"large\" \n                htmlType=\"submit\"\n                loading={loading}\n                className=\"submit-button\"\n              >\n                Отправить заказ\n              </Button>\n            </div>\n          </Form>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderFormStep; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}